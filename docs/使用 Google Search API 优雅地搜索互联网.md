å¦‚ä½•è·å–æœ€æ–°èµ„è®¯ï¼Ÿæˆ‘å‘ç°[[æœç´¢å¼•æ“]]æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¿¡æ¯æ¥æºã€‚å°¤å…¶æ˜¯æ„æ€å‡ºå…³é”®è¯ï¼Œä»¥ç¨‹åºåŒ–æ–¹å¼ï¼Œå®šæœŸã€è‡ªåŠ¨åœ°è·å–ï¼Œå°±åƒ RSS è®¢é˜…ä¸€æ ·ã€‚

æœ€åˆï¼Œæˆ‘åŸºäº [[qutebrowser]] å†™äº†ä¸€ä¸ªæµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå¯¹ä¼—å¤šå…³é”®è¯è¿›è¡Œå®šæœŸæŠ“å–ã€‚ä½†æ˜¯ï¼ŒGoogle çš„åçˆ¬æ¯”è¾ƒå‰å®³ï¼Œå¾ˆå®¹æ˜“å°±è¢«è¯†åˆ«ä¸ºå¼‚å¸¸æµé‡äº†ã€‚

ä¹‹åï¼Œæˆ‘äº†è§£åˆ° Google æä¾›æœç´¢ APIï¼Œå…è®¸å¼€å‘äººå‘˜ä»¥ç¼–ç¨‹æ–¹å¼è®¿é—®æœç´¢ç»“æœã€‚

å¹¶ä¸”è¿˜æœ‰ä¸€å®šçš„å…è´¹é¢åº¦ï¼Œå®šä»·æ–¹é¢ï¼Œæ¯å¤©å…è´¹æä¾›100æ¬¡APIè°ƒç”¨ï¼Œä¹‹åæ¯1000æ¬¡ä¸º5ç¾å…ƒï¼Œæœ€å¤šå¯è¾¾æ¯å¤©1ä¸‡æ¬¡ã€‚è¿™ä¸ªé¢åº¦è¶³å¤Ÿæˆ‘ä¸ªäººä½¿ç”¨äº†ã€‚

äºæ˜¯ï¼Œæˆ‘æ‰“ç®—æ”¹ç”¨æ­£è§„çš„ APIã€‚åœ¨æœ¬æ–‡ä¸­è®°å½•äº†æˆ‘çš„å®è·µè¿‡ç¨‹ã€‚å¦‚æœä½ æœ‰å¥½çš„æƒ³æ³•æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼

---

## è§†é¢‘æ•™ç¨‹

å¹¸è¿çš„æ˜¯ï¼Œæˆ‘æœåˆ°äº†ä¸€ä¸ªè§†é¢‘æ•™ç¨‹ï¼Œæ‰‹æŠŠæ‰‹æ•™æˆ‘ä»¬å®ç°æœ¬æ–‡ç›®æ ‡ï¼š

- ã€Š[Getting Started With Google Search API For Beginners In Python](https://www.youtube.com/watch?v=D4tWHX2nCzQ&t=1s)ã€‹
- ã€Š[Pythonä¸­çš„Googleæœç´¢APIå®Œæ•´æŒ‡å—- è§†é¢‘æ€»ç»“ - Glarity](https://glarity.app/zh-CN/youtube-summary/education/getting-started-with-google-search-api-18371781_568494)ã€‹

ä¸‹é¢æ˜¯æˆ‘è®°å½•çš„å¤§è‡´æµç¨‹ï¼Œå…·ä½“çš„è¯·å‚è§åŸè§†é¢‘ï¼š

- è¿›å…¥ Google Consoleï¼Œåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®å¹¶è¿›å…¥ã€‚ä¾§è¾¹æ é€‰æ‹© APIs & Servicesï¼Œå­èœå•é€‰æ‹© Libraryã€‚è¿›å…¥é¡µé¢åæœ‰ä¸€ä¸ªæœç´¢æ¡†ï¼Œæœç´¢â€œsearch apiâ€ã€‚é€‰æ‹© **Custom Search API**ï¼Œç‚¹å‡» Enableã€‚å†æ¬¡ä¾§è¾¹æ é€‰æ‹© APIs & Servicesï¼Œå­èœå•é€‰æ‹© Credentialsã€‚ç‚¹å‡» Create Credentialsï¼Œå¼¹å‡ºèœå•ç‚¹å‡» API Keyï¼ŒæŠŠè¿™ä¸ª key ä¿å­˜ä¸‹æ¥ã€‚

- æ¥ä¸‹æ¥éœ€è¦åˆ›å»ºä¸€ä¸ª Google Search Engineã€‚è¿›å…¥ `programmablesearchengine.google.com`ï¼Œåœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªæœç´¢å¼•æ“ã€‚å½“ä½¿ç”¨ API ä»£ç çš„æ—¶å€™ï¼ŒAPI ä½¿ç”¨è¿™é‡Œçš„æœç´¢å¼•æ“è®¾ç½®ã€‚å…¶ä¸­çš„è®¾ç½®åŒ…æ‹¬ï¼Œæœç´¢èŒƒå›´ï¼ˆæ•´ä¸ªäº’è”ç½‘è¿˜æ˜¯éƒ¨åˆ†ç½‘ç«™ï¼‰ã€‚ç‚¹å‡»åˆ›å»ºåï¼Œä¼šå‡ºç°ä¸€ä¸ª HTML çš„ JavaScript åµŒå…¥ä»£ç ï¼Œç”¨äºåµŒå…¥ç½‘é¡µä¸­ã€‚æˆ‘ä»¬ä¸éœ€è¦ï¼Œè¿”å›åˆ°åˆ›å»ºçš„æœç´¢å¼•æ“åˆ—è¡¨ï¼Œå†æ¬¡è¿›å…¥æœç´¢å¼•æ“ï¼Œä¼šæ˜¾ç¤ºå…¶è¯¦ç»†ä¿¡æ¯ï¼Œå¤åˆ¶ **Search Engine ID**ã€‚

- æ¥ä¸‹æ¥æ˜¯è°ƒç”¨ CustomSearch çš„ JSON APIã€‚å‚æ•°ï¼š`cx` å¯¹åº” **Search Engine ID**ã€‚`dateRestrict` æ§åˆ¶æ—¥æœŸã€‚

- è§†é¢‘ä¸­ç»™å‡ºäº†ä¸€ä¸ªåŸºäº Requests çš„ Python å°è£…ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚å¹¶ä¸”åœ¨ main æ–¹æ³•ä¸­æä¾›äº†ç¿»é¡µçˆ¬å–é€»è¾‘ã€‚

ç›¸å…³æ–‡æ¡£åœ°å€ï¼š

- ğŸ“‘ [Google Search API Documentation](https://developers.google.com/custom-search/v1/reference/rest/v1/cse/list)
- ğŸ“‘ [Create Google Search Engine](https://programmablesearchengine.google.com/about/)
- ğŸ“‘ [Create Google Project](https://developers.google.com/)

---

## API

æ–‡æ¡£ï¼šğŸ“‘ [Google Search API Documentation](https://developers.google.com/custom-search/v1/reference/rest/v1/cse/list)

è¯·æ±‚å‚æ•°ï¼š

- `cx`ï¼šThe Programmable Search Engine ID
- `dateRestrict`ï¼šæ£€ç´¢æ—¥æœŸèŒƒå›´ï¼Œ`m1` è¡¨ç¤ºæœ€è¿‘ä¸€ä¸ªæœˆï¼Œ`w2` è¡¨ç¤ºæœ€è¿‘ä¸¤å‘¨
- `num`ï¼šå•æ¬¡è¯·æ±‚è¿”å›ç»“æœæ•°é‡ï¼Œå–å€¼èŒƒå›´ `1~10`ï¼Œ10 æ˜¯æœ€å¤§å€¼
- `q`ï¼šæœç´¢å…³é”®è¯
- `start`ï¼šåˆ†é¡µæœç´¢åç§»é‡ï¼Œå¦‚æœç¬¬ä¸€é¡µè¿”å›äº† 10 ä¸ªç»“æœï¼Œ`start=11` è¡¨ç¤ºå¼€å§‹æœç´¢ç¬¬äºŒé¡µ

---

## ä»£ç å®ç°

ä¸Šä¸€èŠ‚çš„è§†é¢‘ä¸­ç»™å‡ºäº†ä»£ç å®ç°ï¼Œä»…ä¾èµ– Requestï¼ˆPandas å¯ä»¥ä¸ä¾èµ–ï¼‰ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘å°†è§†é¢‘ä¸­çš„ä»£ç å½•å…¥å¦‚ä¸‹ï¼š

```python
import re
import requests
import pandas as pd

def build_payload(query, start=1, num=10, date_restrict='m1', **params):
	"""
	Function to build the payload for the Google Search API request.

	:param query: Search term
	:param start: The index of the first results to return
	:param link_site: Specifies that all search results should contain a link to a particular URL
	:param search_type: Type of search (default is undefined, 'IMAGE' for image search)
	:param date_restrict: Restricts results based on recency (default is one month 'm1')
	:param params: Additional parameters for the API request

	:return: Dictionary containing the API request parameters
	"""
	payload = {
		'key': API_KEY,
		'q': query,
		'cx': SEARCH_ENGINE_ID,
		'start': start,
		'num': num,
		'dateRestrict': date_restrict
	}
	payload.update(params)
	return payload

def make_request(payload):
	"""
	Function to send a GET request to the Google Search API and handle potential errors.

	:param payload: Dictionary containing the API request parameters
	:return: JSON response from the API
	"""
	response = requests.get('https://www.googleapis.com/customsearch/v1', params=payload)
	if response.status_code != 200:
		raise Exception('Request failed')
	return response.json()

def main(query, result_total=10):
	"""
	Main function to execute the script
	"""
	items = []
	reminder = result_total % 10
	if remainder > 0:
		pages = (result_total // 10) + 1
	else:
		pages = result_total // 10

	for i in range(pages):
		if pages == i + 1 and reminder > 0:
			payload = build_payload(query, start=(i+1)*10, num=reminder)
		else:
			payload = build_payload(query, start=(i+1)*10)
		response = make_request(payload)
		items.extends(response['items'])
	query_string_clean = clean_filename(query)
	# save items to file using pandas
```

---

## è¿”å›å€¼

åœ¨æ¥å£è¿”å›ä¸­ï¼Œæœ‰ä¸€ä¸ª `items` å­—æ®µï¼Œé‡Œé¢åŒ…å«è¿”å›ç»“æœã€‚å…¶ä¸­æ¯ä¸ªå…ƒç´ å­—æ®µï¼š

- `kind`
- `title`ï¼šæ ‡é¢˜
- `htmlTitle`
- `link`ï¼šurl
- `displayLink`ï¼šç«™ç‚¹åŸŸå
- `snippet`ï¼šæè¿°
- `htmlSnippet`
- `formattedUrl`
- `htmlFormattedUrl`
- `pagemap`
	- `cse_thumbnail`ï¼šç¼©ç•¥å›¾ï¼Œåˆ—è¡¨ï¼Œå†…éƒ¨æ ¼å¼ï¼ˆ`src`, `width`, `height`ï¼‰ï¼Œèµ° Google æœåŠ¡å™¨
	- `cse_image`ï¼šå›¾åƒåŸå›¾ï¼Œåˆ—è¡¨ï¼Œå†…éƒ¨æ ¼å¼ï¼ˆ`src`)ï¼Œèµ°æ–‡ç« ç½‘é¡µè‡ªå·±çš„ URL åœ°å€

---

## å…¶ä»–ç½‘ç»œèµ„æ–™

[Programmatically searching google in Python using custom search - Stack Overflow](https://stackoverflow.com/questions/37083058/programmatically-searching-google-in-python-using-custom-search)

[What are the alternatives now that the Google web search API has been deprecated? - Stack Overflow](https://stackoverflow.com/questions/4082966/what-are-the-alternatives-now-that-the-google-web-search-api-has-been-deprecated/11206266#11206266)

[googleapis/google-api-python-client: ğŸ The official Python client library for Google's discovery based APIs.](https://github.com/googleapis/google-api-python-client)
[bisohns/search-engine-parser: Lightweight package to query popular search engines and scrape for result titles, links and descriptions](https://github.com/bisohns/search-engine-parser)

[web scraping - Is it ok to scrape data from Google results? - Stack Overflow](https://stackoverflow.com/questions/22657548/is-it-ok-to-scrape-data-from-google-results#22703153)


